/**
 * Setup file for Jest that sets environment variables for all tests
 */

try {
  // Load environment variables from the file generated by setup-test-env.js
  const testEnvVars = require('./tests/test-env-vars.js');
  
  // Set environment variables for tests
  process.env.AUTH_METHOD = testEnvVars.AUTH_METHOD;
  process.env.FIREBASE_PROJECT_ID = testEnvVars.FIREBASE_PROJECT_ID;
  process.env.FIRESTORE_EMULATOR_HOST = testEnvVars.FIRESTORE_EMULATOR_HOST;
  process.env.GOOGLE_APPLICATION_CREDENTIALS = testEnvVars.GOOGLE_APPLICATION_CREDENTIALS;
  
  console.log('Jest setup: Loaded environment variables from test-env-vars.js');
  console.log('- AUTH_METHOD:', process.env.AUTH_METHOD);
  console.log('- FIREBASE_PROJECT_ID:', process.env.FIREBASE_PROJECT_ID);
  console.log('- GOOGLE_APPLICATION_CREDENTIALS:', process.env.GOOGLE_APPLICATION_CREDENTIALS);
} catch (error) {
  console.warn('Jest setup: Could not load test environment variables:', error.message);
  console.warn('Tests requiring service account credentials might fail');
}
